<!-- Card de produto -->
<div class="col-6 col-md-4 col-xl-3 product-item"
     data-price="{% if product.em_promocao and product.preco_promocional %}{{ product.preco_promocional|floatformat:2 }}{% else %}{{ product.preco|floatformat:2 }}{% endif %}"
     data-promotion="{% if product.em_promocao %}true{% else %}false{% endif %}">
  <div class="card border-0 h-100 product-card rounded-3">
    <div class="position-relative overflow-hidden">
      {% if product.imagem %}
        <img src="{{ product.imagem.url }}" class="card-img-top rounded-top-3" alt="{{ product.nome }}" style="height: 140px; object-fit: contain; background: #fff; image-rendering: auto;">
      {% else %}
        <div class="card-img-top bg-light d-flex align-items-center justify-content-center rounded-top-3" style="height: 140px;">
          <i class="bi bi-image text-muted" style="font-size: 2rem;"></i>
        </div>
      {% endif %}
      {% if product.em_promocao %}
        <span class="badge bg-danger position-absolute top-0 start-0 m-2" style="font-size: 0.7rem;">Promoção</span>
      {% endif %}
    </div>
    <div class="card-body d-flex flex-column p-2 p-md-3 text-center">
      <h5 class="card-title mb-1" style="font-size: 0.95rem; font-weight: 500; line-height: 1.2;">{{ product.nome }}</h5>
      <div class="mb-2">
        {% if product.em_promocao and product.preco_promocional %}
          <span class="text-muted text-decoration-line-through small">R$ {{ product.preco }}</span>
          <span class="fw-bold text-danger ms-1">R$ {{ product.preco_promocional }}</span>
        {% else %}
          <span class="fw-bold text-dark">R$ {{ product.preco }}</span>
        {% endif %}
      </div>
      <a href="{% url 'product_detail' product.slug %}" class="btn btn-outline-dark btn-sm rounded-pill w-100 mt-auto">
        Ver Detalhes
      </a>
    </div>
  </div>
</div>

<style>

@media (max-width: 576px) {
  .product-item {
    width: 50%;
    max-width: 50%;
    flex: 0 0 50%;
    padding-left: 6px;
    padding-right: 6px;
  }
  .product-card .card-img-top {
    height: 110px !important;
  }
  .product-card .card-body {
    padding: 0.4rem !important;
  }
  .product-card .card-title {
    font-size: 0.8rem !important;
    line-height: 1.1 !important;
  }
  .product-card .btn {
    font-size: 0.7rem !important;
    padding: 0.25rem 0.5rem !important;
  }
}

@media (min-width: 577px) and (max-width: 992px) {
  .product-card .card-img-top {
    height: 120px !important;
  }
}

@media (min-width: 993px) {
  .product-card .card-img-top {
    height: 140px !important;
  }
}

.product-card {
  transition: box-shadow 0.2s, transform 0.2s;
}
.product-card:hover {
  box-shadow: 0 4px 18px rgba(0,0,0,0.10) !important;
  transform: translateY(-2px) scale(1.01);
}
</style>

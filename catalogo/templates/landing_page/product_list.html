{% extends 'base.html' %}
{% load static %}
{% block title %}{{ categoria.nome|default:'Catálogo Completo' }} - OuriPrata{% endblock %}
{% block meta_description %}<meta name="description" content="{{ page_subtitle|default:'Veja todos os produtos e promoções da OuriPrata.' }}">{% endblock %}
{% block og_title %}{{ categoria.nome|default:'Catálogo Completo' }} - OuriPrata{% endblock %}
{% block og_description %}{{ page_subtitle|default:'Veja todos os produtos e promoções da OuriPrata.' }}{% endblock %}
{% block og_image %}{% static 'assets/landing_page/logo.png' %}{% endblock %}

{% block content %}
<style>
  .product-list-header {
    background: #fff;
    border-radius: 1.5rem;
    box-shadow: 0 2px 16px rgba(0,0,0,0.04);
    padding: 1.5rem 1.5rem 1.5rem 1.5rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }
  .product-list-header h1 {
    font-size: 2.2rem;
    font-weight: 600;
    letter-spacing: -1px;
    color: #222;
    margin-bottom: 0.5rem;
  }
  .product-list-header p {
    color: #888;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }
  .product-list-header hr {
    width: 60px;
    border: 2px solid #ffc107;
    margin: 1rem auto 0.5rem auto;
    opacity: 1;
  }
  .breadcrumb {
    background: none;
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
  }
  .breadcrumb-item a {
    color: #888;
    text-decoration: none;
    transition: color 0.2s;
  }
  .breadcrumb-item a:hover {
    color: #ffc107;
  }
  .breadcrumb-item.active {
    color: #222;
    font-weight: 500;
  }
  .filters-sidebar {
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.03);
    padding: 1.5rem 1rem;
    margin-bottom: 0;
  }
  .product-list-empty {
    text-align: center;
    padding: 4rem 1rem;
    color: #888;
  }
</style>
<main class="container pb-2 pb-md-4">
  <!-- ===== HEADER DA LISTAGEM (INCLUINDO BREADCRUMB) ===== -->
  <section class="product-list-header mb-0" style="padding-top:2.5rem;">
    <nav aria-label="breadcrumb" class="mb-2">
      <ol class="breadcrumb justify-content-center mb-1">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Início</a></li>
        {% if categoria %}
          <li class="breadcrumb-item"><a href="{% url 'catalogo' %}">Catálogo</a></li>
          <li class="breadcrumb-item active" aria-current="page">{{ categoria.nome }}</li>
        {% else %}
          <li class="breadcrumb-item active" aria-current="page">Catálogo</li>
        {% endif %}
      </ol>
    </nav>
    <h1 class="mb-1">{{ categoria.nome|default:'Catálogo Completo' }}</h1>
    <p class="mb-2">{{ page_subtitle|default:'Veja todos os produtos e promoções da OuriPrata.' }}</p>
    <hr>
  </section>
  <div class="row g-4 mt-0">
    <!-- ===== FILTROS (SIDEBAR) ===== -->
    <aside class="col-lg-3 d-none d-lg-block">
      <div class="filters-sidebar">
        {% include 'landing_page/partials/filters_menu.html' %}
      </div>
    </aside>
    <!-- ===== GRID DE PRODUTOS ===== -->
    <section class="col-lg-9">
      {% if products %}
        <div class="row g-3 g-md-4">
          {% for product in products %}
            {% include 'landing_page/partials/product_card.html' %}
          {% endfor %}
        </div>
      {% else %}
        <div class="product-list-empty">
          <i class="bi bi-search text-warning mb-3" style="font-size: 3rem;"></i>
          <h4 class="mb-2">Nenhum produto encontrado</h4>
          <p class="mb-4">Não encontramos produtos nesta categoria ou filtro.</p>
          <a href="{% url 'catalogo' %}" class="btn btn-outline-warning rounded-pill px-4">Ver Catálogo Completo</a>
        </div>
      {% endif %}
    </section>
  </div>
</main>
{% endblock %} 